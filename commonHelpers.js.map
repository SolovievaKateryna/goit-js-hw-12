{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"45296804-0fb55f0e1381bd4cbf585a7a5\";    // ключ що отримала після реєстрації тут https://pixabay.com/api/docs/#api_search_images\n\naxios.defaults.baseURL = URL;\n\nexport async function fetchImages(query, page = 1) {      \n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,                                            \n    };\n\ntry {\n    const response = await axios.get(URL, {params});      \n    return response.data;\n} catch(error) {\n    console.error(\"Image Search Error:\", error);\n    throw error;\n}\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector(\".gallery-list\");\n\nexport function renderImages(images) {\n    const markup = images\n    .map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n    })=> `\n    <li>\n    <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <div class=\"text-wrapper\">\n    <div class=\"stat\"><p><b>Likes:</b> ${likes}</p></div>\n    <div class=\"stat\"><p><b>Views:</b> ${views}</p> </div>\n    <div class=\"stat\"><p><b>Comments:</b> ${comments}</p></div>\n    <div class=\"stat\"><p><b>Downloads:</b> ${downloads}</p></div>\n        </div>\n    </li>\n    `\n) \n.join('');\n\ngalleryList.insertAdjacentHTML(\"beforeend\", markup);\n\nnew SimpleLightbox ('.gallery-list a', {\n    captionsData:\"alt\",\n    captionsDelay: 250\n}).refresh();\n}\n\nexport function clearGallery() {\n    galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.add('hidden');\n}","import {fetchImages} from './js/pixabay-api.js';\nimport {\n    renderImages,\n    clearGallery,\n    showLoader,\n    hideLoader, \n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\nconst form = document.querySelector(\".form-search\");\nlet query = '';\nlet page = 1;\nlet maxPages = 0;\n\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    query = event.currentTarget.elements.query.value.trim();\n    page = 1;\n\n    if(!query) {\n        iziToast.error({\n            message: 'Please enter a search query!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    showLoader();\n    clearGallery();                                   \n    loadMoreBtn.classList.add('hidden');\n\n    try {\n        const data = await fetchImages(query, page);\n        maxPages = data.maxpages;\n\n        if(data.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n            });\n        } else {\n            renderImages(data.hits);\n\n        if (data.hits.length < 15 || maxPages <= 15) {\n            iziToast.info({\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        } else {\n            loadMoreBtn.classList.remove('hidden');\n        }\n        }\n    } catch(error) {\n        iziToast.error({ title: 'Error', message: error.message });\n    } finally {\n        hideLoader();\n        form.reset();\n    }\n});\n\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page+=1;\n    showLoader();\n\n    try{\n        const data = await fetchImages(query, page);\n        renderImages(data.hits);\n\n        if (data.hits.length === 0 || page * 15 >= maxPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            smoothScroll();\n        }\n    } catch(error) {\n        iziToast.error({ title: 'Error', message: error.message });\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document\n    .querySelector('.gallery-list')\n    .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["URL","API_KEY","axios","fetchImages","query","page","params","error","galleryList","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","loadMoreBtn","form","maxPages","event","iziToast","data","smoothScroll","cardHeight"],"mappings":"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"}